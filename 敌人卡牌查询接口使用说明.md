# æ•Œäººå¡ç‰ŒæŸ¥è¯¢æ¥å£ä½¿ç”¨è¯´æ˜

## ğŸ“‹ é—®é¢˜èƒŒæ™¯

ä¸€ä¸ªå…³å¡ä¸­å¯èƒ½æœ‰å¤šä¸ªä¸åŒçš„æ•Œäººï¼Œæ¯ä¸ªæ•Œäººæœ‰ä¸åŒçš„å¡ç‰Œã€‚ä¹‹å‰çš„æ¥å£åªæ”¯æŒé€šè¿‡å…³å¡å’Œéš¾åº¦éšæœºé€‰æ‹©ä¸€ä¸ªæ•Œäººï¼Œæ— æ³•åŒºåˆ†ä¸åŒæ•Œäººçš„å¡ç‰Œã€‚

## âœ… è§£å†³æ–¹æ¡ˆ

ç°åœ¨æä¾›äº†ä¸¤ç§æŸ¥è¯¢æ–¹å¼ï¼š

### æ–¹å¼ä¸€ï¼šç›´æ¥é€šè¿‡æ•ŒäººIDæŸ¥è¯¢ï¼ˆæ¨èï¼‰

**æ¥å£**ï¼š`GET /api/game/enemy-cards?enemyId={enemyId}`

**è¯´æ˜**ï¼šç›´æ¥æŸ¥è¯¢æŒ‡å®šæ•Œäººçš„æ‰€æœ‰å¡ç‰Œï¼ˆåŒ…æ‹¬æ³•æœ¯ã€è£…å¤‡ã€è§’è‰²å¡ï¼‰

**ç¤ºä¾‹**ï¼š
```bash
# æŸ¥è¯¢æ•ŒäººIDä¸º1çš„æ‰€æœ‰å¡ç‰Œ
GET /api/game/enemy-cards?enemyId=1
```

**è¿”å›æ ¼å¼**ï¼š
```json
{
  "code": 200,
  "message": "æ“ä½œæˆåŠŸ",
  "data": [
    {
      "name": "ç«çƒæœ¯",
      "type": "spell",
      "effect": "{\"type\": \"damage_single\", \"damage\": 30}"
    },
    {
      "name": "é“å£æŠ¤ç”²",
      "type": "equipment",
      "attack": 0,
      "health": 0
    },
    {
      "name": "æš—å½±åˆºå®¢",
      "type": "character",
      "attack": 30,
      "health": 30
    }
  ]
}
```

### æ–¹å¼äºŒï¼šé€šè¿‡å…³å¡å’Œéš¾åº¦æŸ¥è¯¢ï¼ˆéšæœºé€‰æ‹©ï¼‰

**æ¥å£**ï¼š`GET /api/game/enemy-cards?stage={stage}&difficulty={difficulty}`

**è¯´æ˜**ï¼šæ ¹æ®å…³å¡å’Œéš¾åº¦éšæœºé€‰æ‹©ä¸€ä¸ªæ•Œäººï¼Œè¿”å›è¯¥æ•Œäººçš„å¡ç‰Œ

**ç¤ºä¾‹**ï¼š
```bash
# æŸ¥è¯¢ç¬¬1å…³æ™®é€šéš¾åº¦çš„æ•Œäººå¡ç‰Œï¼ˆéšæœºé€‰æ‹©ä¸€ä¸ªæ•Œäººï¼‰
GET /api/game/enemy-cards?stage=1&difficulty=æ™®é€š
```

### æ–¹å¼ä¸‰ï¼šè·å–å…³å¡ä¸­æ‰€æœ‰å¯èƒ½çš„æ•Œäººåˆ—è¡¨

**æ¥å£**ï¼š`GET /api/game/stage-enemies?stage={stage}&difficulty={difficulty}`

**è¯´æ˜**ï¼šè¿”å›å…³å¡ä¸­æ‰€æœ‰å¯èƒ½å‡ºç°çš„æ•Œäººåˆ—è¡¨ï¼Œç„¶åå¯ä»¥å•ç‹¬æŸ¥è¯¢æ¯ä¸ªæ•Œäººçš„å¡ç‰Œ

**ç¤ºä¾‹**ï¼š
```bash
# è·å–ç¬¬1å…³æ™®é€šéš¾åº¦çš„æ‰€æœ‰å¯èƒ½æ•Œäºº
GET /api/game/stage-enemies?stage=1&difficulty=æ™®é€š
```

**è¿”å›æ ¼å¼**ï¼š
```json
{
  "code": 200,
  "message": "æ“ä½œæˆåŠŸ",
  "data": [
    {
      "id": 1,
      "name": "æš—å½±çŒæ‰‹",
      "difficulty": "normal",
      "weight": 3
    },
    {
      "id": 3,
      "name": "ç°çƒ¬éª‘å£«",
      "difficulty": "normal",
      "weight": 2
    }
  ]
}
```

**ä½¿ç”¨æµç¨‹**ï¼š
1. å…ˆè°ƒç”¨ `GET /api/game/stage-enemies` è·å–å…³å¡ä¸­æ‰€æœ‰å¯èƒ½çš„æ•Œäºº
2. ç„¶åå¯¹æ¯ä¸ªæ•Œäººè°ƒç”¨ `GET /api/game/enemy-cards?enemyId={id}` è·å–å…¶å¡ç‰Œ

## ğŸ¯ æ¨èä½¿ç”¨æ–¹å¼

### åœºæ™¯ä¸€ï¼šæˆ˜æ–—å‰é¢„è§ˆæ‰€æœ‰æ•ŒäººåŠå…¶å¡ç‰Œ

```javascript
// 1. è·å–å…³å¡ä¸­æ‰€æœ‰å¯èƒ½çš„æ•Œäºº
const enemiesResponse = await fetch('/api/game/stage-enemies?stage=1&difficulty=æ™®é€š');
const enemies = enemiesResponse.data;

// 2. ä¸ºæ¯ä¸ªæ•ŒäººæŸ¥è¯¢å…¶å¡ç‰Œ
const enemiesWithCards = await Promise.all(
  enemies.map(async (enemy) => {
    const cardsResponse = await fetch(`/api/game/enemy-cards?enemyId=${enemy.id}`);
    return {
      ...enemy,
      cards: cardsResponse.data
    };
  })
);

// 3. ç°åœ¨å¯ä»¥å±•ç¤ºæ‰€æœ‰æ•ŒäººåŠå…¶å¡ç‰Œ
console.log(enemiesWithCards);
```

### åœºæ™¯äºŒï¼šæˆ˜æ–—æ—¶æŸ¥è¯¢å½“å‰æ•Œäººçš„å¡ç‰Œ

```javascript
// å½“é­é‡æ•Œäººæ—¶ï¼Œä»æˆ˜æ–—çŠ¶æ€ä¸­è·å– enemyId
const enemyId = battleState.pendingEnemyId;

// ç›´æ¥æŸ¥è¯¢è¯¥æ•Œäººçš„å¡ç‰Œ
const cardsResponse = await fetch(`/api/game/enemy-cards?enemyId=${enemyId}`);
const enemyCards = cardsResponse.data;
```

## ğŸ“Š æ¥å£å¯¹æ¯”

| æ¥å£ | å‚æ•° | è¿”å›å†…å®¹ | ä½¿ç”¨åœºæ™¯ |
|------|------|----------|----------|
| `GET /api/game/enemy-cards?enemyId={id}` | `enemyId` | æŒ‡å®šæ•Œäººçš„æ‰€æœ‰å¡ç‰Œ | å·²çŸ¥æ•ŒäººIDï¼ŒæŸ¥è¯¢å…¶å¡ç‰Œ |
| `GET /api/game/enemy-cards?stage={s}&difficulty={d}` | `stage`, `difficulty` | éšæœºé€‰æ‹©çš„æ•Œäººçš„å¡ç‰Œ | å¿«é€Ÿé¢„è§ˆï¼ˆä¸å…³å¿ƒå…·ä½“æ•Œäººï¼‰ |
| `GET /api/game/stage-enemies?stage={s}&difficulty={d}` | `stage`, `difficulty` | å…³å¡ä¸­æ‰€æœ‰å¯èƒ½çš„æ•Œäººåˆ—è¡¨ | è·å–æ•Œäººåˆ—è¡¨ï¼Œç„¶åé€ä¸ªæŸ¥è¯¢å¡ç‰Œ |

## ğŸ” å®ç°ç»†èŠ‚

### æ•Œäººé€‰æ‹©é€»è¾‘

1. **ä¼˜å…ˆä»å…³å¡æ•Œäººæ± é€‰æ‹©**ï¼š
   - å¦‚æœå…³å¡é…ç½®äº† `enemyPool`ï¼ˆJSONæ ¼å¼ï¼‰ï¼Œä»æ•Œäººæ± ä¸­æŒ‰æƒé‡éšæœºé€‰æ‹©
   - æ•Œäººæ± æ ¼å¼ï¼š`[{"id": 1, "weight": 3}, {"id": 3, "weight": 2}]`

2. **å›é€€åˆ°éš¾åº¦åŒ¹é…**ï¼š
   - å¦‚æœå…³å¡æ²¡æœ‰é…ç½®æ•Œäººæ± ï¼Œæ ¹æ®éš¾åº¦æŸ¥è¯¢æ‰€æœ‰åŒ¹é…çš„æ•Œäºº
   - éšæœºé€‰æ‹©ä¸€ä¸ª

3. **æœ€ç»ˆå›é€€**ï¼š
   - å¦‚æœä»¥ä¸Šéƒ½å¤±è´¥ï¼Œè¿”å›ä»»æ„ä¸€ä¸ªæ•Œäºº

### å¡ç‰Œç±»å‹

è¿”å›çš„å¡ç‰Œåˆ—è¡¨åŒ…å«ä¸‰ç§ç±»å‹ï¼š
- `type: "spell"` - æ³•æœ¯å¡ç‰Œï¼ˆä» `enemy_cards` è¡¨ï¼Œå…³è” `cards` è¡¨ï¼‰
- `type: "equipment"` - è£…å¤‡å¡ç‰Œï¼ˆä» `enemy_cards` è¡¨ï¼Œå…³è” `cards` è¡¨ï¼‰
- `type: "character"` - è§’è‰²å¡ï¼ˆä» `enemy_card_characters` è¡¨ï¼Œå…³è” `card_characters` è¡¨ï¼‰

---

**æœ€åæ›´æ–°**ï¼š2025-12-04  
**ç»´æŠ¤è€…**ï¼šé¡¹ç›®å›¢é˜Ÿ

