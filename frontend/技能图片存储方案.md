# 技能图片存储方案

## 📸 图片存储位置

### 推荐目录结构

技能图片应存储在以下目录结构中：

```
frontend/
├── static/
│   └── images/
│       └── skills/              # 技能图片根目录
│           ├── warden/          # 守望者职业技能图片
│           │   ├── skill_001.png
│           │   ├── skill_002.png
│           │   └── ...
│           ├── occultist/       # 秘术师职业技能图片
│           │   ├── skill_001.png
│           │   ├── skill_002.png
│           │   └── ...
│           ├── ranger/          # 游侠职业技能图片
│           │   └── ...
│           ├── warrior/         # 战士职业技能图片
│           │   └── ...
│           └── common/          # 通用技能图片（可选）
│               └── ...
```

### 图片命名规则

**路径匹配优先级**（从高到低）：

1. **直接存储在 skills 目录下（推荐，优先级最高）**：
   - 路径格式：`/static/images/skills/{技能code}.png`
   - 示例：`/static/images/skills/divine_shield.png`
   - 优点：简单直接，便于管理，适合技能名称唯一的场景

2. **按职业分类存储（备选）**：
   - 路径格式：`/static/images/skills/{职业代码}/{技能code}.png`
   - 示例：`/static/images/skills/warden/divine_shield.png`
   - 优点：便于管理，不同职业的技能图片分开存储，适合不同职业有同名技能的场景

### 支持的图片格式

- PNG（推荐）：支持透明背景，适合游戏UI
- JPG：文件体积小，但不支持透明背景

## 🖼️ 图片使用方式

### 在代码中的使用

技能树组件会自动尝试加载技能图片，加载逻辑如下（按优先级从高到低）：

1. **优先尝试**：`/static/images/skills/{技能code}.png`（直接放在 skills 目录下）
2. **备选路径1**：`/static/images/skills/{技能code}.jpg`
3. **备选路径2**：`/static/images/skills/{职业代码}/{技能code}.png`（按职业分类）
4. **备选路径3**：`/static/images/skills/{职业代码}/{技能code}.jpg`
5. **如果所有路径都不存在**，会自动回退到CSS样式图标

### 图片规格建议

- **尺寸**：建议 100x100 像素（或更高分辨率的正方形）
- **格式**：PNG（支持透明背景）
- **风格**：与游戏整体风格保持一致
- **背景**：建议使用透明背景，让边框和光效效果更好

## 📝 实现说明

### 代码实现位置

技能图片加载逻辑在 `frontend/components/SkillsTreePanel.vue` 中：

```typescript
// 获取技能图片URL
function getSkillImageUrl(skill: Skill): string | null {
  if (!skill.code || !playerCharacter.value?.playerCharacterCode) {
    return null
  }
  
  const classCode = playerCharacter.value.playerCharacterCode
  const skillCode = skill.code
  
  // 构建图片路径
  return `/static/images/skills/${classCode}/${skillCode}.png`
}
```

### 图片显示逻辑

1. 如果图片存在，显示图片
2. 如果图片不存在或加载失败，自动使用CSS样式图标（带渐变背景和光效）
3. 图片会覆盖在CSS样式背景之上，保持边框和光效效果

## 🎨 样式说明

技能图标容器支持以下状态样式：

- **已解锁**：金色渐变背景 + 金色边框 + 光效动画
- **可解锁**：紫色渐变背景 + 紫色边框 + 脉冲动画
- **已锁定**：暗紫色背景 + 灰色边框 + 降低透明度

图片会显示在容器内，保持圆角边框和光效效果。

## 📋 使用步骤

1. **准备技能图片**：
   - 根据技能code命名图片
   - 例如："神圣护盾"技能，code为`divine_shield`，则图片命名为`divine_shield.png`

2. **放置图片**（两种方式任选其一）：
   
   **方式一（推荐）**：直接放在 skills 目录下
   - 路径：`frontend/static/images/skills/divine_shield.png`
   - 优点：简单直接，优先级最高
   
   **方式二**：按职业分类存储
   - 路径：`frontend/static/images/skills/warden/divine_shield.png`
   - 优点：便于管理不同职业的同名技能

3. **验证显示**：
   - 刷新技能树页面
   - 图片会自动加载并显示
   - 如果图片不存在，会显示默认的CSS样式图标

## 🔍 调试技巧

如果图片不显示，可以：

1. 检查浏览器控制台是否有404错误
2. 确认图片路径是否正确
3. 确认图片文件名是否与技能code完全匹配（区分大小写）
4. 检查图片格式是否支持（PNG或JPG）

## 📌 注意事项

1. **图片命名**：必须与技能code完全匹配（区分大小写）
2. **路径格式**：使用 `/static/` 开头的绝对路径
3. **回退机制**：如果图片不存在，会自动使用CSS样式，不会报错
4. **性能优化**：建议图片大小控制在50KB以内，避免影响加载速度

